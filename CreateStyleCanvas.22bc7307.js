parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"eIdM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STYLIST_GET_STYLE_DETAIL=void 0;var n,e=require("@apollo/client");function t(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}var i=(0,e.gql)(n||(n=t(["\nquery getStyle($input: GetStyleInput!){\n  getStyle(input: $input) {\n    data {\n      creator\n      id\n      taffiId\n      price\n      currency\n      title\n      description\n      collection\n      consumersId\n      consumers{\n        id\n        firstName\n        lastName\n        profileImageUrl\n        gender\n      }\n      images\n      personas {\n        id \n        title\n        value\n        subject\n      }\n      bodyShapes {\n        id \n        title\n        value\n        subject\n      }\n      bodyTypes {\n        id \n        title\n        value\n        subject\n      }\n      imageJson\n      genders{\n        id\n        title\n        value\n        subject\n      }\n      user {\n        gender\n        firstName\n        lastName\n      }\n      purposes {\n        id \n        title\n        value\n        subject\n      }\n      ages {\n        id \n        title\n        value\n        subject\n      }\n      seasons {\n        id \n        title\n        value\n        subject\n      }\n      categories {\n        id\n        name\n        value\n      }\n      tags {\n        id\n        name\n        value\n      }\n      items {\n        id\n        data {\n          localId\n          creator\n          colors{\n            id \n            title\n            value\n            subject\n            type\n          }\n          sizes{\n            id \n            title\n            value\n            subject\n            type\n          }\n          id\n          taffiId\n          collection\n          price\n          currency\n          itemCodes\n          available\n          title\n          description\n          categories {\n            id\n            name\n          }\n          tags {\n            id\n            name\n          }\n          url\n          images\n          accessLevel\n        }\n        variant {\n          color\n          size\n        }\n      }\n      status\n    }\n    paging {\n      size\n      page\n    }\n  }\n}\n"])));exports.STYLIST_GET_STYLE_DETAIL=i;
},{"@apollo/client":"mEz9"}],"b87L":[function(require,module,exports) {
module.exports="/backgrondEmpty.f2232965.png";
},{}],"gbgJ":[function(require,module,exports) {
!function(){function e(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function t(e){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(e)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function n(e,t){e.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function i(e){var t=e.g.offsetWidth,n=t+100;return e.j.style.width=n+"px",e.i.scrollLeft=n,e.h.scrollLeft=e.h.scrollWidth+100,e.l!==t&&(e.l=t,!0)}function o(t,n){function o(){var e=s;i(e)&&null!==e.g.parentNode&&n(e.l)}var s=t;e(t.h,o),e(t.i,o),i(t)}function s(e,t,n){t=t||{},n=n||window,this.family=e,this.style=t.style||"normal",this.weight=t.weight||"normal",this.stretch=t.stretch||"normal",this.context=n}var d=null,l=null,a=null,r=null;function c(e){return null===r&&(r=!!e.document.fonts),r}function h(e,t){var n=e.style,i=e.weight;if(null===a){var o=document.createElement("div");try{o.style.font="condensed 100px sans-serif"}catch(s){}a=""!==o.style.font}return[n,i,a?e.stretch:"","100px",t].join(" ")}s.prototype.load=function(e,i){var s=this,a=e||"BESbswy",r=0,u=i||3e3,m=(new Date).getTime();return new Promise(function(e,i){if(c(s.context)&&(w=s.context,null===l&&(c(w)&&/Apple/.test(window.navigator.vendor)?(w=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!w&&603>parseInt(w[1],10)):l=!1),!l)){var f=new Promise(function(e,t){!function n(){(new Date).getTime()-m>=u?t(Error(u+"ms timeout exceeded")):s.context.document.fonts.load(h(s,'"'+s.family+'"'),a).then(function(t){1<=t.length?e():setTimeout(n,25)},t)}()}),p=new Promise(function(e,t){r=setTimeout(function(){t(Error(u+"ms timeout exceeded"))},u)});Promise.race([p,f]).then(function(){clearTimeout(r),e(s)},i)}else!function(e){document.body?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):document.attachEvent("onreadystatechange",function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),e())})}(function(){function l(){var t;(t=-1!=w&&-1!=g||-1!=w&&-1!=v||-1!=g&&-1!=v)&&((t=w!=g&&w!=v&&g!=v)||(null===d&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),d=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=d&&(w==y&&g==y&&v==y||w==x&&g==x&&v==x||w==E&&g==E&&v==E)),t=!t),t&&(null!==b.parentNode&&b.parentNode.removeChild(b),clearTimeout(r),e(s))}var c=new t(a),f=new t(a),p=new t(a),w=-1,g=-1,v=-1,y=-1,x=-1,E=-1,b=document.createElement("div");b.dir="ltr",n(c,h(s,"sans-serif")),n(f,h(s,"serif")),n(p,h(s,"monospace")),b.appendChild(c.g),b.appendChild(f.g),b.appendChild(p.g),s.context.document.body.appendChild(b),y=c.g.offsetWidth,x=f.g.offsetWidth,E=p.g.offsetWidth,function e(){if((new Date).getTime()-m>=u)null!==b.parentNode&&b.parentNode.removeChild(b),i(Error(u+"ms timeout exceeded"));else{var t=s.context.document.hidden;!0!==t&&void 0!==t||(w=c.g.offsetWidth,g=f.g.offsetWidth,v=p.g.offsetWidth,l()),r=setTimeout(e,50)}}(),o(c,function(e){w=e,l()}),n(c,h(s,'"'+s.family+'",sans-serif')),o(f,function(e){g=e,l()}),n(f,h(s,'"'+s.family+'",serif')),o(p,function(e){v=e,l()}),n(p,h(s,'"'+s.family+'",monospace'))});var w})},"object"==typeof module?module.exports=s:(window.FontFaceObserver=s,window.FontFaceObserver.prototype.load=s.prototype.load)}();
},{}],"l39S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("react/jsx-runtime"),t=require("fabric"),n=require("react"),o=require("reduxDir/create-style/create-style.slice"),r=require("reduxDir/store"),a=require("@apollo/client"),i=require("graph_ql/createStyle/mutation"),l=require("../../../constants"),s=f(require("component/StandardPopup")),u=require("react-router-dom"),c=require("lodash"),d=f(require("fontfaceobserver"));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return I(e)||y(e,t)||g(e,t)||p()}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function y(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(s){l=!0,r=s}finally{try{i||null==n.return||n.return()}finally{if(l)throw r}}return a}}function I(e){if(Array.isArray(e))return e}var v=function(f){var p=f.selectedImage,g=f.canvasObj,h=f.itemId,y=f.index,I=f.handleSelectEditImage,v=f.imageCanvas,b=f.textId,w=f.handleSelectEditText,x=(0,u.useHistory)(),S=(0,r.useAppDispatch)(),C=(0,r.useAppSelector)(function(e){return e.createStyle}),j=C.imageJson,J=C.currentEditingStyleId,q=C.items,A=m((0,a.useMutation)(i.UPDATE_STYLE),1)[0],_=m((0,n.useState)({show:!1,title:"",content:"",button1:"",button2:"",path:"",type:"",closeButton:!0}),2),E=_[0],Y=_[1],O=m((0,n.useState)(!1),2),X=O[0],F=O[1],T=function(e){Y({show:!0,title:"Something went wrong.",content:e,button1:"Okay",button2:"",path:"",type:l.ToastType.Error,closeButton:!0})},k=function(){var e=((null==g?void 0:g._objects)||[]).map(function(e){return"text"===e.type?(0,c.pick)(e,["angle","width","height","top","left","scaleX","scaleY","textId","type","text","fontColor","fontFamily"]):(0,c.pick)(e,["angle","width","height","top","left","scaleX","scaleY","itemId","imageCanvas","url"])});S((0,o.setImageJson)(e)),S((0,o.setShouldUpdate)(!0))};return(0,n.useEffect)(function(){var e=new d.default("Fraunces"),t=new d.default("Poppins"),n=new d.default("Arial"),o=new d.default("ShadowsIntoLightTwo");Promise.all([e.load(),t.load(),n.load(),o.load()]).then(function(){F(!0)})},[]),(0,n.useEffect)(function(){var e=[];if(p&&X)if("text"===p.type&&p.text){var n=new t.fabric.Text(p.text,{top:p.top,left:p.left,angle:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,fontFamily:p.fontFamily,fill:p.fontColor,fontWeight:"normal",fontSize:40,styles:{letterSpacing:"0px"}});if(g){n.setControlsVisibility({bl:!1,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,tl:!1,tr:!1,mtr:!0}),n.borderColor="#1D474F",n.setOptions({type:p.type,textId:b,fontColor:p.fontColor,handleSelectedEditImage:function(e){b&&w(b)},deleteImage:function(e){try{var t=((null==g?void 0:g._objects)||[]).reduce(function(e,t){var n=e.newImageJson;return t.textId!==b&&("text"===t.type?n.push((0,c.pick)(t,["angle","width","height","top","left","scaleX","scaleY","textId","type","text","fontColor","fontFamily"])):n.push((0,c.pick)(t,["angle","width","height","top","left","scaleX","scaleY","itemId","imageCanvas","url"]))),{newImageJson:n}},{newImageJson:[],itemIds:[]}).newImageJson;return A({variables:{input:{id:J,imageJson:t}}}).then(function(e){S((0,o.setImageJson)(t))}),!0}catch(n){return console.error(n),T("An error occurred while deleting the item. Please try again."),!1}}}),n.on("moved",function(){k()}),n.on("rotated",function(){k()}),n.on("scaled",function(){k()});var r=(null==g?void 0:g._objects)||[],a=r.findIndex(function(e){return e.textId===b});a>=0&&g.remove(r[a]),g.add(n)}}else v&&t.fabric.Image.fromURL(v,function(t){g&&(t.setControlsVisibility({bl:!1,br:!0,mb:!1,ml:!1,mr:!1,mt:!1,tl:!1,tr:!1,mtr:!0}),t.borderColor="#1D474F",t.setOptions({total:j.length,list:j,itemId:h,imageCanvas:v,url:p.url,handleSelectedEditImage:function(e){I(e)},swapImage:function(e,t,n){console.log("swapImage event"),console.log(e),console.log(t),console.log(n)},deleteImage:function(e){try{var t=((null==g?void 0:g._objects)||[]).reduce(function(t,n){var o=t.newImageJson,r=t.itemIds;return n.itemId!==e&&("text"===n.type?o.push((0,c.pick)(n,["angle","width","height","top","left","scaleX","scaleY","textId","type","text","fontColor","fontFamily"])):(o.push((0,c.pick)(n,["angle","width","height","top","left","scaleX","scaleY","itemId","imageCanvas","url"])),r.push(n.itemId))),{newImageJson:o,itemIds:r}},{newImageJson:[],itemIds:[]}),n=t.newImageJson,r=t.itemIds,a=q.reduce(function(e,t){return r.includes(t.id)&&e.push({itemId:t.id,variant:(0,c.omit)(t.variant,"__typename")}),e},[]),i={id:J,items:n.length?a:[],imageJson:n};return a.length||(i.images=[]),A({variables:{input:i}}).then(function(e){S((0,o.setImageJson)(n)),S((0,o.setStyleItems)(e.data.updateStyle.items))}),!0}catch(l){return console.error(l),T("An error occurred while deleting the item. Please try again."),!1}}}),t.on("moved",function(){k()}),t.on("rotated",function(){k()}),t.on("scaled",function(){k()}),e.push(t),g.add(t),g.moveTo(t,y))},{top:p.top,left:p.left,angle:p.angle,scaleX:p.scaleX,scaleY:p.scaleY,crossOrigin:"anonymous"});return function(){for(var t=0;t<e.length;t++)g&&g.remove(e[t])}},[p,v,X]),(0,e.jsx)(e.Fragment,{children:E.show&&(0,e.jsx)(s.default,{show:E.show,onHide:function(){Y(Object.assign(Object.assign({},E),{show:!1}))},title:E.title,content:E.content,button1:E.button1,button2:E.button2,type:E.type,closeButton:E.closeButton,onSecondButtonClick:function(){E.path&&x.push(E.path)}},void 0)},void 0)},b=v;exports.default=b;
},{"react/jsx-runtime":"plwR","fabric":"aMSe","react":"n8MK","reduxDir/create-style/create-style.slice":"AhH4","reduxDir/store":"WsHt","@apollo/client":"mEz9","graph_ql/createStyle/mutation":"CSF9","../../../constants":"c4Un","component/StandardPopup":"fk63","react-router-dom":"uc19","lodash":"B1iE","fontfaceobserver":"gbgJ"}],"zkrX":[function(require,module,exports) {
module.exports="/deleteIcon.e1c2a39e.png";
},{}],"LBv5":[function(require,module,exports) {
module.exports="/rotateIcon.dea99f9b.png";
},{}],"OMqV":[function(require,module,exports) {
module.exports="/switchImage.08960453.png";
},{}],"zLf5":[function(require,module,exports) {
module.exports="/zoomIcon.e7c0a799.png";
},{}],"dxH1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.initFabricControlImage=void 0;var t=i(require("assets/img/deleteIcon.png")),e=i(require("assets/img/rotateIcon.png")),r=i(require("assets/img/switchImage.png")),n=i(require("assets/img/zoomIcon.png")),o=require("fabric");function i(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(k){f=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new I(o||[]);return n(a,"_invoke",{value:E(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(k){return{type:"throw",arg:k}}}t.wrap=l;var p={};function d(){}function v(){}function y(){}var m={};f(m,i,function(){return this});var g=Object.getPrototypeOf,b=g&&g(g(S([])));b&&b!==e&&r.call(b,i)&&(m=b);var w=y.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(e){f(t,e,function(t){return this._invoke(e,t)})})}function L(t,e){var o;n(this,"_invoke",{value:function(n,i){function c(){return new e(function(o,c){!function n(o,i,c,u){var s=h(t[o],t,i);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==a(l)&&r.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(l).then(function(t){f.value=t,c(f)},function(t){return n("throw",t,c,u)})}u(s.arg)}(n,i,o,c)})}return o=o?o.then(c,c):c()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=j(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function j(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return v.prototype=y,n(w,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:v,configurable:!0}),v.displayName=f(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(L.prototype),f(L.prototype,u,function(){return this}),t.AsyncIterator=L,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(w),f(w,s,"Generator"),f(w,i,function(){return this}),f(w,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}var u=function(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{u(n.next(t))}catch(e){i(e)}}function c(t){try{u(n.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,c)}u((n=n.apply(t,e||[])).next())})},s=function(t,e,r,n){return t.x!=e.x&&t.y!=e.y&&r.x!=n.x&&r.y!=n.y&&(!(t.x>=n.x||r.x>=e.x)&&!(t.y>n.y||r.y>e.y))},f=function(t,e,r){var n=[],o=0;return r.forEach(function(r,i){var a,c;r.id!==t&&r.aCoords?s(e.tl,e.br,null===(a=r.aCoords)||void 0===a?void 0:a.tl,null===(c=r.aCoords)||void 0===c?void 0:c.br)&&n.push(i):o=i}),{overlapElementIndexs:n,currentElementIndex:o}},l=function(t){return function(e,r,n,i,a){var c=a.cornerSize||13;e.save(),e.translate(r,n),a.angle&&e.rotate(o.fabric.util.degreesToRadians(a.angle));var u=document.createElement("img");u.src=t,e.drawImage(u,3*-c/2,3*-c/2,3*c,3*c),e.restore()}};function h(t,e){var r=e.target,n=r.canvas;if(n){var o=r.itemId;(0,r.deleteImage)(o)&&(n.remove(r),n.requestRenderAll())}return!0}function p(t,e){var r;if(e.target.aCoords){f(e.target.id,e.target.aCoords,(null===(r=e.target.canvas)||void 0===r?void 0:r._objects)||[]);var n=e.target;(0,n.handleSelectedEditImage)(n.itemId)}return!0}var d=function(){return u(void 0,void 0,void 0,c().mark(function i(){var a,s,f,d,v;return c().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=function(t){return u(void 0,void 0,void 0,c().mark(function e(){var r,n;return c().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).then(function(t){return t.blob()});case 2:return r=e.sent,e.next=5,new Promise(function(t){var e=new FileReader;e.onload=function(){return t(e.result)},e.readAsDataURL(r)});case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))},i.next=3,a(t.default);case 3:return s=i.sent,i.next=6,a(r.default);case 6:return f=i.sent,i.next=9,a(e.default);case 9:return d=i.sent,i.next=12,a(n.default);case 12:v=i.sent,o.fabric.Object.prototype.controls.deleteControl=new o.fabric.Control({x:.5,y:-.5,offsetY:0,offsetX:0,cursorStyle:"pointer",withConnection:!0,mouseUpHandler:h,render:l(s)}),o.fabric.Object.prototype.controls.switchImage=new o.fabric.Control({x:-.5,y:-.5,offsetY:0,offsetX:0,cursorStyle:"pointer",withConnection:!0,mouseUpHandler:p,render:l(f)}),o.fabric.Object.prototype.controls.mtr.x=-.5,o.fabric.Object.prototype.controls.mtr.y=.5,o.fabric.Object.prototype.controls.mtr.offsetY=0,o.fabric.Object.prototype.controls.mtr.offsetX=0,o.fabric.Object.prototype.controls.mtr.cursorStyle="pointer",o.fabric.Object.prototype.controls.mtr.render=l(d),o.fabric.Object.prototype.controls.br.render=l(v);case 22:case"end":return i.stop()}},i)}))};exports.initFabricControlImage=d;
},{"assets/img/deleteIcon.png":"zkrX","assets/img/rotateIcon.png":"LBv5","assets/img/switchImage.png":"OMqV","assets/img/zoomIcon.png":"zLf5","fabric":"aMSe"}],"Zi9Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.CANVAS_OFFSET=void 0;var e=require("react/jsx-runtime"),r=require("fabric"),t=u(require("react")),a=require("utils/useVisaulViewport"),i=require("../../../redux/store"),n=require("../../../redux/create-style/create-style.slice");function s(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(s=function(e){return e?t:r})(e)}function u(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s(r);if(t&&t.has(e))return t.get(e);var a={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var u=i?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(a,n,u):a[n]=e[n]}return a.default=e,t&&t.set(e,a),a}var o=125;exports.CANVAS_OFFSET=o;var c=1024,f=t.default.forwardRef(function(s,u){var f=(0,i.useAppDispatch)(),l=s.setCanvasObject,p=(0,a.useVisualViewport)(),d=p.viewport.width,v=p.viewport.height,y=d>c?c:d,b=v-o;return(0,t.useEffect)(function(){var e=new r.fabric.Canvas("canvas-create-style",{backgroundColor:"#fff",preserveObjectStacking:!0});e.setDimensions({width:y,height:b}),l(e),f((0,n.setStyleCanvasObject)({width:y,height:b}))},[]),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("canvas",Object.assign({id:"canvas-create-style",ref:u,style:{backgroundSize:"100% 100%",zIndex:999}},{children:s.children}),void 0)},void 0)}),l=f;exports.default=l;
},{"react/jsx-runtime":"plwR","fabric":"aMSe","react":"n8MK","utils/useVisaulViewport":"I70S","../../../redux/store":"WsHt","../../../redux/create-style/create-style.slice":"AhH4"}],"H1QH":[function(require,module,exports) {
module.exports="/recommend2.30734529.png";
},{}],"FAjY":[function(require,module,exports) {
module.exports="/recommend1.cde7a4d0.png";
},{}],"MWBC":[function(require,module,exports) {
module.exports="/recommend_avatar.c9da9e47.png";
},{}],"fTlS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STYLE_IMAGE_WIDTH=exports.FAKE_IMG=void 0;var e=s(require("../assets/img/recommend2.png")),t=s(require("../assets/img/recommend1.png")),r=s(require("../assets/img/recommend_avatar.png"));function s(e){return e&&e.__esModule?e:{default:e}}var a={stylist_avatar:r.default,style_img:e.default,style_item_img:t.default};exports.FAKE_IMG=a;var _=900;exports.STYLE_IMAGE_WIDTH=_;
},{"../assets/img/recommend2.png":"H1QH","../assets/img/recommend1.png":"FAjY","../assets/img/recommend_avatar.png":"MWBC"}],"hqvd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useUpdateStyle=h;var t=require("@apollo/client"),r=require("containers/style_detail/constant"),e=require("graph_ql/createStyle/mutation");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){o=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(A){f=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof y?r:y,a=Object.create(o.prototype),u=new O(n||[]);return i(a,"_invoke",{value:E(t,e,u)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(A){return{type:"throw",arg:A}}}t.wrap=s;var p={};function y(){}function v(){}function d(){}var m={};f(m,u,function(){return this});var g=Object.getPrototypeOf,w=g&&g(g(k([])));w&&w!==r&&e.call(w,u)&&(m=w);var b=d.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(r){f(t,r,function(t){return this._invoke(r,t)})})}function L(t,r){var o;i(this,"_invoke",{value:function(i,a){function u(){return new r(function(o,u){!function o(i,a,u,c){var l=h(t[i],t,a);if("throw"!==l.type){var f=l.arg,s=f.value;return s&&"object"==n(s)&&e.call(s,"__await")?r.resolve(s.__await).then(function(t){o("next",t,u,c)},function(t){o("throw",t,u,c)}):r.resolve(s).then(function(t){f.value=t,u(f)},function(t){return o("throw",t,u,c)})}c(l.arg)}(i,a,o,u)})}return o=o?o.then(u,u):u()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var u=S(a,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var c=h(t,r,e);if("normal"===c.type){if(n=e.done?"completed":"suspendedYield",c.arg===p)continue;return{value:c.arg,done:e.done}}"throw"===c.type&&(n="completed",e.method="throw",e.arg=c.arg)}}}function S(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,S(t,r),"throw"===r.method))return p;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=h(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,p;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function _(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function j(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function k(t){if(t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=d,i(b,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=f(d,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,f(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(L.prototype),f(L.prototype,c,function(){return this}),t.AsyncIterator=L,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new L(s(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),f(b,l,"Generator"),f(b,u,function(){return this}),f(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=e.call(i,"catchLoc"),c=e.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),j(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;j(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:k(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,r){return f(t)||l(t,r)||u(t,r)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,r){if(t){if("string"==typeof t)return c(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?c(t,r):void 0}}function c(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function l(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,i=[],a=!0,u=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}function f(t){if(Array.isArray(t))return t}var s=function(t,r,e,n){return new(e||(e=Promise))(function(o,i){function a(t){try{c(n.next(t))}catch(r){i(r)}}function u(t){try{c(n.throw(t))}catch(r){i(r)}}function c(t){var r;t.done?o(t.value):(r=t.value,r instanceof e?r:new e(function(t){t(r)})).then(a,u)}c((n=n.apply(t,r||[])).next())})};function h(){var n=this,a=i((0,t.useMutation)(e.UPDATE_STYLE),1)[0];return[function(t,e,i){return s(n,void 0,void 0,o().mark(function e(){var n;return o().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={id:t,imageJson:i,status:r.ItemStatus.Draft},!(i.length<=0)){e.next=3;break}return e.abrupt("return",null);case 3:return e.abrupt("return",a({variables:{input:n},context:{headers:{background:1}}}));case 4:case"end":return e.stop()}},e)}))}]}
},{"@apollo/client":"mEz9","containers/style_detail/constant":"sOzt","graph_ql/createStyle/mutation":"CSF9"}],"alfj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("react/jsx-runtime"),t=require("@material-ui/core"),n=require("@material-ui/icons"),r=P(require("@material-ui/icons/ArrowRightAlt")),o=require("component/customize_style_component/styled_title"),i=P(require("component/layout/custom_layout")),a=P(require("component/loading_spinner/loading_data_spinner")),u=q(require("component/modal_full_screen")),l=P(require("component/StandardPopup")),c=require("graph_ql/stylist_api/styles/queries"),s=require("react"),d=require("react-div-100vh"),f=require("react-router-dom"),h=require("reduxDir/create-style/create-style.slice"),p=require("reduxDir/store"),v=require("routes/constant"),y=P(require("../../../assets/img/backgrondEmpty.png")),m=P(require("./AddImage")),g=P(require("./Image")),b=require("./initImageFunc"),x=P(require("./SketchPad")),w=require("constants/image"),S=require("@apollo/client"),E=require("../hooks/useUpdateStyle"),j=P(require("omit-deep")),_=require("lodash"),I=require("react-redux"),T=require("../../../utils/canvasHelper"),O=require("../AddCreateStyleItem/types"),k=require("graph_ql/authentication/queries"),C=require("hooks/useQuery"),L=P(require("styles/themes"));function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function q(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}function P(e){return e&&e.__esModule?e:{default:e}}function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=B(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function R(){R=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(O){l=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),u=new _(o||[]);return r(a,"_invoke",{value:w(e,n,u)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var d={};function f(){}function h(){}function p(){}var v={};l(v,i,function(){return this});var y=Object.getPrototypeOf,m=y&&y(y(I([])));m&&m!==t&&n.call(m,i)&&(v=m);var g=p.prototype=f.prototype=Object.create(v);function b(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function x(e,t){var o;r(this,"_invoke",{value:function(r,i){function a(){return new t(function(o,a){!function r(o,i,a,u){var l=s(e[o],e,i);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==M(d)&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,a,u)},function(e){r("throw",e,a,u)}):t.resolve(d).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,u)})}u(l.arg)}(r,i,o,a)})}return o=o?o.then(a,a):a()}})}function w(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=s(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=l(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(x.prototype),l(x.prototype,a,function(){return this}),e.AsyncIterator=x,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new x(c(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},b(g),l(g,u,"Generator"),l(g,i,function(){return this}),l(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=I,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function N(e,t){return G(e)||F(e,t)||B(e,t)||H()}function H(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function B(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}function G(e){if(Array.isArray(e))return e}var U=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function u(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,u)}l((r=r.apply(e,t||[])).next())})},W=(0,t.makeStyles)(function(){return{wrapper:{width:"100%",position:"relative","& [class^=MuiDialogTitle]":{display:"none"}},canvasWrapper:function(e){return{height:"calc(".concat(e.height,"px - 125px)"),maxWidth:"1024px","& canvas":{height:"100%!important",maxWidth:"1024px"},"& .canvas-container":{height:"100%!important",maxWidth:"1024px"},"& .upper-canvas":{backgroundImage:"".concat(e.isShowLogo?"url(".concat(y.default):"none",")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"".concat(e.isShowLogo?"cover !important":"100% 100%")}}}}}),J=function(){var t=(0,I.useSelector)(function(e){return e.userDetail.me}),y=(0,C.useQueryData)(k.USER_DETAIL,null,!0,!0),A=(0,s.useMemo)(function(){var e;return null===(e=null==y?void 0:y.dataQuery)||void 0===e?void 0:e.me},[y]),q=(0,f.useLocation)(),P=(0,f.useRouteMatch)("".concat(v.PATH.EDIT_STYLE_CANVAS,"/:taffiId")),M=N((0,E.useUpdateStyle)(),1)[0],H=N((0,s.useState)(0),2),B=H[0],Y=H[1],F=q.pathname.includes(v.PATH.EDIT_STYLE_CANVAS),G=N((0,s.useState)(),2),J=G[0],z=G[1],Q=N((0,s.useState)(""),2),V=Q[0],X=Q[1],$=N((0,s.useState)([]),2),K=$[0],Z=$[1],ee=(0,p.useAppSelector)(function(e){return e.createStyle}),te=ee.isPublishingStyle,ne=ee.shouldUpdate,re=ee.imageJson,oe=ee.items,ie=ee.currentEditingItemId,ae=ee.currentEditingStyleId,ue=ee.renderRequested,le=ee.canvasObject,ce=N((0,s.useState)(!1),2),se=ce[0],de=ce[1],fe=(0,S.useQuery)(c.STYLIST_GET_STYLE_DETAIL,{variables:{input:{taffiId:null==P?void 0:P.params.taffiId,paging:{size:10,page:0}}},fetchPolicy:"network-only",skip:!F||J,onCompleted:function(e){return U(void 0,void 0,void 0,R().mark(function n(){var r,o,i;return R().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(null===e){n.next=13;break}if(r=(0,j.default)(e,"__typename"),(o=(0,_.get)(r,["getStyle","data",0]))&&t.id===o.creator){n.next=7;break}pe.push(v.PATH.PATH_NOT_FOUND),n.next=13;break;case 7:return z(o),n.next=10,he(o.imageJson);case 10:i=n.sent,Z(i),Ce((0,h.setRenderRequested)(!1));case 13:case"end":return n.stop()}},n)}))}}).loading,he=function(e){return U(void 0,void 0,void 0,R().mark(function t(){var n,r,o,i,a,u,l,c,s;return R().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=le.width,r=le.height,o=!1,i=[],a=D(e),t.prev=5,a.s();case 7:if((u=a.n()).done){t.next=23;break}if(l=u.value,c=l.left+l.width*l.scaleX/2,s=l.top+l.height*l.scaleY/2,!(c>n||c<0||s>r||s<0)){t.next=20;break}return o=!0,t.t0=i,t.next=16,(0,T.getImageJsonObject)(l.url,l.imageCanvas,le,l.itemId);case 16:t.t1=t.sent,t.t0.push.call(t.t0,t.t1),t.next=21;break;case 20:i.push(l);case 21:t.next=7;break;case 23:t.next=28;break;case 25:t.prev=25,t.t2=t.catch(5),a.e(t.t2);case 28:return t.prev=28,a.f(),t.finish(28);case 31:return o&&(Ce((0,h.setImageJson)(i)),Ce((0,h.setShouldUpdate)(!0))),t.abrupt("return",i);case 33:case"end":return t.stop()}},t,null,[[5,25,28,31]])}))},pe=(0,f.useHistory)(),ve=N((0,s.useState)({show:!1,title:"You may lose any unsaved changes on this page. Are you sure you want to leave this page ?",content:"",button1:"Yes",button2:"",path:"",type:"",buttonCancel:"No",closeButton:!1}),2),ye=ve[0],me=ve[1],ge=N((0,s.useState)(!1),2),be=ge[0],xe=ge[1],we=N((0,s.useState)(!1),2),Se=we[0],Ee=we[1],je=N((0,s.useState)(!1),2),_e=je[0],Ie=je[1],Te=N((0,s.useState)(!1),2),Oe=Te[0],ke=Te[1],Ce=(0,p.useAppDispatch)(),Le=(0,p.useAppSelector)(function(e){return e.createStyle.activeImageIndex});(0,s.useEffect)(function(){F||(Ce((0,h.setCurrentEditingStyleId)(null)),Ce((0,h.setCurrentEditingItemId)(null)),Ce((0,h.setStyleItems)([])),Ce((0,h.setImageJson)([])))},[]),(0,s.useEffect)(function(){if(J){if(!Me())return;Ce((0,h.setCurrentEditingStyleId)(J.id)),Ce((0,h.setStyleItems)(J.items)),Ce((0,h.setImageJson)(J.imageJson)),ie&&qe(ie)}},[J]),(0,s.useEffect)(function(){ue&&(Z(re),Ce((0,h.setRenderRequested)(!1)))},[ue]);var Ae=(0,d.use100vh)(),qe=function(e){var n,r,o=null==oe?void 0:oe.find(function(t){return(null==t?void 0:t.id)===e});(null===(n=null==o?void 0:o.data)||void 0===n?void 0:n.accessLevel)===O.ItemStyleAccess.Public&&(null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.creator)!==((null==t?void 0:t.id)||(null==A?void 0:A.id))&&Ce((0,h.setEditStyleItemDisabled)(!0)),Ce((0,h.setCurrentEditingItemId)(e)),xe(!0)},Pe=function(e){ke(!0),X(e)},Me=function(){if(J.imageJson)return!0;me(Object.assign(Object.assign({},ye),{title:"This style was not created using Taffi stylist app. So this style cannot be edited.",button2:"",button1:"Okay",buttonCancel:"",closeButton:!1,show:!0}))};(0,s.useEffect)(function(){Ge&&setTimeout(function(){try{null==Ge||Ge.setActiveObject(null==Ge?void 0:Ge._objects[Le]),null==Ge||Ge._objects[Le].setCoords(),null==Ge||Ge.renderAndReset(),null==Ge||Ge.renderAll()}catch(e){}},1e3)},[Le]);var De=(0,s.useMemo)(function(){return{height:Ae,isShowLogo:0===(null==re?void 0:re.length)}},[Ae,re]),Re=W(De),Ne=N((0,s.useState)(null),2),He=Ne[0],Be=(Ne[1],N((0,s.useState)(!1),2)),Ye=Be[0];Be[1];(0,s.useEffect)(function(){(0,b.initFabricControlImage)()},[]);var Fe=N((0,s.useState)(),2),Ge=Fe[0],Ue=Fe[1],We=(0,s.useRef)(null),Je=(0,s.useMemo)(function(){return Boolean(He)},[He]),ze=(0,s.useCallback)(function(e){Ce((0,h.addCreateStyleCanvasImage)({url:e})),Ee(!0)},[Ce]),Qe=N((0,s.useState)(!1),2),Ve=Qe[0],Xe=Qe[1];(0,s.useEffect)(function(){var e;((null==re?void 0:re.length)?re.filter(function(e){return"text"!==e.type}).length:(null==Ge?void 0:Ge._objects)&&(null==Ge?void 0:Ge._objects.length)>0?null===(e=null==Ge?void 0:Ge._objects)||void 0===e?void 0:e.filter(function(e){return"text"!==e.type}).length:void 0)?Xe(!0):Xe(!1)},[null==Ge?void 0:Ge._objects,re,We.current]);var $e=N((0,s.useState)(null==J?void 0:J.price),2),Ke=$e[0],Ze=$e[1];return(0,s.useEffect)(function(){var e=0;oe&&oe.length&&(e+=oe.reduce(function(e,t){var n;return e+=+(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.price)},0)),Ze(e)},[J,oe]),(0,s.useEffect)(function(){var e=setInterval(function(){return Y(function(e){return e+1})},3e3);return function(){clearInterval(e)}},[]),(0,s.useEffect)(function(){!function(){U(this,void 0,void 0,R().mark(function e(){return R().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!te){e.next=2;break}return e.abrupt("return");case 2:if(!(J||(null==re?void 0:re.length)>0)){e.next=17;break}if(e.prev=3,!F){e.next=12;break}if(se||!ne){e.next=12;break}return de(!0),e.next=9,M(ae,Ge,re);case 9:e.sent&&Ce((0,h.setShouldUpdate)(!1)),de(!1);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[3,14]])}))}()},[B,re]),(0,e.jsxs)("div",Object.assign({className:Re.wrapper},{children:[(0,e.jsx)(i.default,Object.assign({title:q.pathname.includes(v.PATH.EDIT_STYLE_CANVAS)?"Edit Style":"Create Style",showBackBtn:!1,hideBottomNav:!0,backTo:"/home",headerLeftBtn:(0,e.jsx)("span",Object.assign({onClick:function(){re&&(null==re?void 0:re.length)>0?me(Object.assign(Object.assign({},ye),{show:!0})):q.pathname===v.PATH.CREATE_STYLE?pe.push(v.PATH.HOME):pe.goBack()}},{children:(0,e.jsx)(n.Close,{},void 0)}),void 0),colorHeader:"white"},{children:(0,e.jsx)("div",Object.assign({className:Re.canvasWrapper},{children:(0,e.jsx)(x.default,Object.assign({ref:We,setCanvasObject:Ue,isShowLogo:0===(null==re?void 0:re.length)},{children:null==K?void 0:K.map(function(t,n){return(0,e.jsx)(g.default,{imageCanvas:t.imageCanvas,selectedImage:t,listImages:re,itemId:t.itemId,textId:t.textId,canvasObj:Ge,index:n,handleSelectEditImage:qe,handleSelectEditText:Pe},"image_".concat(n))})}),void 0)}),void 0)}),void 0),fe&&(0,e.jsx)(a.default,{},void 0),(0,e.jsx)("div",Object.assign({style:{width:"100%",height:"auto",position:"absolute",bottom:"80px",display:"flex",alignItems:"center",justifyContent:"center"}},{children:(0,e.jsxs)("div",Object.assign({style:{background:"rgba(232, 240, 241, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:10,padding:10,backdropFilter:"blur(25px)"}},{children:[(0,e.jsx)(o.Text,Object.assign({color:L.default.palette.common.white},{children:"Total:"}),void 0),(0,e.jsxs)(o.Text,Object.assign({size:"14px",weight:"600",color:L.default.palette.common.white,style:{marginLeft:"6px"}},{children:[Ke||0," SAR"]}),void 0)]}),void 0)}),void 0),(0,e.jsxs)("div",Object.assign({style:{width:"100%",height:"70px",position:"absolute",bottom:"0",display:"flex",alignItems:"center",justifyContent:"center",background:L.default.palette.primary.main}},{children:[(0,e.jsx)("div",Object.assign({className:"next-btn",onClick:function(e){return U(void 0,void 0,void 0,R().mark(function t(){var n,r;return R().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(Ge&&(null==Ge?void 0:Ge._objects.length)<=0)){t.next=3;break}return t.abrupt("return");case 3:We.current&&(null==Ge||Ge.discardActiveObject(e),null==Ge||Ge.renderAll(),r=w.STYLE_IMAGE_WIDTH/((null==Ge?void 0:Ge.width)||w.STYLE_IMAGE_WIDTH),Ce((0,h.setStyleImg)(null==Ge?void 0:Ge.toDataURL({multiplier:r}))),null===(n=We.current)||void 0===n||n.toBlob(function(e){if(e){var t=URL.createObjectURL(e);ze(t),Ce((0,h.addFinalImageBlob)({blob:e}))}})),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log(t.t0);case 9:case"end":return t.stop()}},t,null,[[0,6]])}))}},{children:Ve&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("span",Object.assign({style:{marginRight:"10px",fontFamily:"PoppinsRegular",fontWeight:400,cursor:"pointer",color:"#fff"}},{children:"Next"}),void 0),(0,e.jsx)(r.default,{style:{color:"white"}},void 0)]},void 0)}),void 0),_e&&(0,e.jsx)("div",{children:(0,e.jsx)(u.default,{styleData:J,open:_e,handleClose:function(){Ie(!1)},title:"Select or Create Item",modal_code:u.ETitleModal.ADD_OR_SELECT_ITEM,componentProps:{handleCloseModal:function(){Ie(!1)},handleCompletedProcess:function(){Ie(!1),xe(!0)}},isEnableTitle:!1},void 0)},void 0),Oe&&(0,e.jsx)("div",{children:(0,e.jsx)(u.default,{styleData:J,open:Oe,handleClose:function(){ke(!1),X("")},title:"",customContainerClass:"grayBg",modal_code:u.ETitleModal.TEXT_EDITOR,componentProps:{handleCloseModal:function(){ke(!1),X("")},handleCompletedProcess:function(){ke(!1),X("")},currentEditingTextId:V,canvasObj:Ge},isEnableTitle:!1},void 0)},void 0),be&&(0,e.jsx)("div",{children:(0,e.jsx)(u.default,{styleData:J,open:be,handleClose:function(){xe(!1)},title:"Create Style Item",modal_code:u.ETitleModal.CREATE_STYLE,componentProps:{handleCloseModal:function(){xe(!1)}},isEnableTitle:!1},void 0)},void 0),Se&&(0,e.jsx)(u.default,{open:Se,styleData:J,handleClose:function(){Ee(!1)},title:"Style Information",modal_code:u.ETitleModal.STYLE_CREATED_INFO,componentProps:{handleCloseModal:function(){Ee(!1)}},isEnableTitle:!1},void 0),(0,e.jsx)(m.default,{handleOpenCreateStyleModal:function(e){Ce((0,h.setCurrentEditingItemId)(null)),Ie(e)},handleOpenTextEditorModal:function(e){ke(e)},isEnable:Je,isAddTemplateOpen:Ye},void 0),(0,e.jsx)(l.default,{show:ye.show,onHide:function(){return me(Object.assign(Object.assign({},ye),{show:!1}))},title:ye.title,content:ye.content,button1:ye.button1,buttonCancel:ye.buttonCancel,onSecondButtonClick:function(){ye.path&&pe.push(ye.path)},type:ye.type,closeButton:ye.closeButton,onFirstButtonClick:function(){q.pathname===v.PATH.CREATE_STYLE?pe.push(v.PATH.HOME):pe.goBack()}},void 0)]}),void 0)]}),void 0)},z=J;exports.default=z;
},{"react/jsx-runtime":"plwR","@material-ui/core":"dT3j","@material-ui/icons":"dCa6","@material-ui/icons/ArrowRightAlt":"wKkv","component/customize_style_component/styled_title":"OtKn","component/layout/custom_layout":"cpyL","component/loading_spinner/loading_data_spinner":"CfNc","component/modal_full_screen":"lj3S","component/StandardPopup":"fk63","graph_ql/stylist_api/styles/queries":"eIdM","react":"n8MK","react-div-100vh":"r79t","react-router-dom":"uc19","reduxDir/create-style/create-style.slice":"AhH4","reduxDir/store":"WsHt","routes/constant":"QgAm","../../../assets/img/backgrondEmpty.png":"b87L","./AddImage":"YxEe","./Image":"l39S","./initImageFunc":"dxH1","./SketchPad":"Zi9Z","constants/image":"fTlS","@apollo/client":"mEz9","../hooks/useUpdateStyle":"hqvd","omit-deep":"a9YI","lodash":"B1iE","react-redux":"jYIL","../../../utils/canvasHelper":"jKxL","../AddCreateStyleItem/types":"NPh2","graph_ql/authentication/queries":"zPbL","hooks/useQuery":"CgDY","styles/themes":"bzqE"}]},{},[], null)